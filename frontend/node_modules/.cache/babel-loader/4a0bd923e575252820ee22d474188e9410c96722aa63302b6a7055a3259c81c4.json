{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Pie}from'react-chartjs-2';import axios from'axios';import{Chart as ChartJS,Title,Tooltip,Legend,ArcElement}from'chart.js';import'./CompanyPlacementsChart.css';// Import the CSS file\n// Register necessary Chart.js components\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(Title,Tooltip,Legend,ArcElement);// Function to generate a color based on an index\nfunction generateColor(index){const hue=index*360/20;// Generate hue based on the index\nreturn`hsl(${hue}, 95%, 50%)`;// HSL color with full saturation and medium lightness\n}function CompanyPlacementsChart(_ref){let{year}=_ref;const[chartData,setChartData]=useState({labels:[],datasets:[]});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[noData,setNoData]=useState(false);useEffect(()=>{const fetchData=async()=>{setLoading(true);setError(null);setNoData(false);try{const response=await axios.get('/api/placements/chart-data',{params:{year}});const{labels,values}=response.data;if(labels.length===0){setNoData(true);}else{setChartData({labels,datasets:[{label:'Number of Placements',data:values,backgroundColor:labels.map((_,index)=>generateColor(index)),borderColor:labels.map((_,index)=>generateColor(index)),borderWidth:1}]});}}catch(error){setError('Error loading chart data: '+error.message);console.error('Error loading chart data:',error);}finally{setLoading(false);}};if(year){fetchData();}},[year]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"chart-header\",children:[\" Company wise Placements in \",year||'All Years',\" \"]}),\" \",loading?/*#__PURE__*/_jsx(\"p\",{children:\" Loading... \"}):error?/*#__PURE__*/_jsxs(\"p\",{children:[\" \",error,\" \"]}):noData?/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:\" No data was found for the selected year. \"}):/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'300px'},children:[/*#__PURE__*/_jsx(Pie,{data:chartData,options:{plugins:{tooltip:{callbacks:{label:function(tooltipItem){const dataIndex=tooltipItem.dataIndex;const value=chartData.datasets[0].data[dataIndex];const total=chartData.datasets[0].data.reduce((acc,curr)=>acc+curr,0);const percentage=(value/total*100).toFixed(2);return`${chartData.labels[dataIndex]}: ${value} (${percentage}%)`;}}},legend:{labels:{color:'#000'// Change legend label color to black (adjust as needed)\n}}},responsive:true,maintainAspectRatio:false}}),\" \"]}),\" \"]});}export default CompanyPlacementsChart;","map":{"version":3,"names":["React","useEffect","useState","Pie","axios","Chart","ChartJS","Title","Tooltip","Legend","ArcElement","jsxs","_jsxs","jsx","_jsx","register","generateColor","index","hue","CompanyPlacementsChart","_ref","year","chartData","setChartData","labels","datasets","loading","setLoading","error","setError","noData","setNoData","fetchData","response","get","params","values","data","length","label","backgroundColor","map","_","borderColor","borderWidth","message","console","className","children","style","width","height","options","plugins","tooltip","callbacks","tooltipItem","dataIndex","value","total","reduce","acc","curr","percentage","toFixed","legend","color","responsive","maintainAspectRatio"],"sources":["/Users/roopakowshika/placement/placementfrontend/frontend/src/components/CompanyPlacementsChart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Pie } from 'react-chartjs-2';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { Chart as ChartJS, Title, Tooltip, Legend, ArcElement } from 'chart.js';\nimport './CompanyPlacementsChart.css'; // Import the CSS file\n\n// Register necessary Chart.js components\nChartJS.register(Title, Tooltip, Legend, ArcElement);\n\n// Function to generate a color based on an index\nfunction generateColor(index) {\n    const hue = index * 360 / 20; // Generate hue based on the index\n    return `hsl(${hue}, 95%, 50%)`; // HSL color with full saturation and medium lightness\n}\n\nfunction CompanyPlacementsChart({ year }) {\n    const [chartData, setChartData] = useState({ labels: [], datasets: [] });\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [noData, setNoData] = useState(false);\n\n    useEffect(() => {\n        const fetchData = async() => {\n            setLoading(true);\n            setError(null);\n            setNoData(false);\n            try {\n                const response = await axios.get('/api/placements/chart-data', {\n                    params: { year }\n                });\n\n                const { labels, values } = response.data;\n\n                if (labels.length === 0) {\n                    setNoData(true);\n                } else {\n                    setChartData({\n                        labels,\n                        datasets: [{\n                            label: 'Number of Placements',\n                            data: values,\n                            backgroundColor: labels.map((_, index) => generateColor(index)),\n                            borderColor: labels.map((_, index) => generateColor(index)),\n                            borderWidth: 1,\n                        }],\n                    });\n                }\n            } catch (error) {\n                setError('Error loading chart data: ' + error.message);\n                console.error('Error loading chart data:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        if (year) {\n            fetchData();\n        }\n    }, [year]);\n\n    return ( <\n            div className = \"chart-container\" >\n            <\n            h2 className = \"chart-header\" > Company wise Placements in { year || 'All Years' } < /h2> {\n            loading ? ( <\n                p > Loading... < /p>\n            ) : error ? ( <\n                p > { error } < /p>\n            ) : noData ? ( <\n                p className = \"message\" > No data was found\n                for the selected year. < /p>\n            ) : ( <\n                div style = {\n                    { width: '100%', height: '300px' }\n                } >\n                <\n                Pie data = { chartData }\n                options = {\n                    {\n                        plugins: {\n                            tooltip: {\n                                callbacks: {\n                                    label: function(tooltipItem) {\n                                        const dataIndex = tooltipItem.dataIndex;\n                                        const value = chartData.datasets[0].data[dataIndex];\n                                        const total = chartData.datasets[0].data.reduce((acc, curr) => acc + curr, 0);\n                                        const percentage = ((value / total) * 100).toFixed(2);\n                                        return `${chartData.labels[dataIndex]}: ${value} (${percentage}%)`;\n                                    }\n                                }\n                            },\n                            legend: {\n                                labels: {\n                                    color: '#000' // Change legend label color to black (adjust as needed)\n                                }\n                            }\n                        },\n                        responsive: true,\n                        maintainAspectRatio: false\n                    }\n                }\n                /> < /\n                div >\n            )\n        } <\n        /div>\n);\n}\n\nCompanyPlacementsChart.propTypes = {\n    year: PropTypes.number.isRequired, // Ensure the year prop is a number\n};\n\nexport default CompanyPlacementsChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}