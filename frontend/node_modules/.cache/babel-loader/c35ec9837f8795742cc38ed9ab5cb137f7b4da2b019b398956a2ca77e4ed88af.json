{"ast":null,"code":"var _jsxFileName = \"/Users/roopakowshika/placement/placement__/frontend/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = ({\n  onLogin = () => {},\n  onSwitchToRegister = () => {}\n}) => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      // Redirect to home page if already logged in\n      navigate('/');\n    }\n  }, [navigate]); // Only run effect when navigate changes\n\n  const handleRegisterClick = () => {\n    onSwitchToRegister();\n    navigate('/register');\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await fetch('http://localhost:1000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        onLogin(); // Call the onLogin callback\n        localStorage.setItem('authToken', data.token); // Store the token\n        navigate('/'); // Redirect to home page\n      } else {\n        alert(data.message || 'Login failed');\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      alert('An error occurred. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \" Username: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 27\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \" Password: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 15\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"login-button\",\n        children: \"Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"register-prompt\",\n        children: [\"Don\\u2019 t have an account ? \", ' ', \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleRegisterClick,\n          children: \"Register \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 42\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 18\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 14\n  }, this);\n};\n_s(Login, \"QC0cStVpEbT25lI8lwUl3n1iakY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","Login","onLogin","onSwitchToRegister","_s","username","setUsername","password","setPassword","navigate","token","localStorage","getItem","handleRegisterClick","handleSubmit","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","setItem","alert","message","error","console","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","value","onChange","e","target","required","onClick","_c","$RefreshReg$"],"sources":["/Users/roopakowshika/placement/placement__/frontend/src/components/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Login.css';\n\nconst Login = ({ onLogin = () => {}, onSwitchToRegister = () => {} }) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const token = localStorage.getItem('authToken');\n        if (token) {\n            // Redirect to home page if already logged in\n            navigate('/');\n        }\n    }, [navigate]); // Only run effect when navigate changes\n\n    const handleRegisterClick = () => {\n        onSwitchToRegister();\n        navigate('/register');\n    };\n\n    const handleSubmit = async(event) => {\n        event.preventDefault();\n\n        try {\n            const response = await fetch('http://localhost:1000/api/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ username, password }),\n            });\n\n            const data = await response.json();\n\n            if (response.ok) {\n                onLogin(); // Call the onLogin callback\n                localStorage.setItem('authToken', data.token); // Store the token\n                navigate('/'); // Redirect to home page\n            } else {\n                alert(data.message || 'Login failed');\n            }\n        } catch (error) {\n            console.error('Error logging in:', error);\n            alert('An error occurred. Please try again.');\n        }\n    };\n\n    return ( <\n        div className = \"login-container\" >\n        <\n        form className = \"login-form\"\n        onSubmit = { handleSubmit } >\n        <\n        h2 > Login < /h2> <\n        div className = \"input-group\" >\n        <\n        label htmlFor = \"username\" > Username: < /label> <\n        input type = \"text\"\n        id = \"username\"\n        value = { username }\n        onChange = {\n            (e) => setUsername(e.target.value)\n        }\n        required /\n        >\n        <\n        /div> <\n        div className = \"input-group\" >\n        <\n        label htmlFor = \"password\" > Password: < /label> <\n        input type = \"password\"\n        id = \"password\"\n        value = { password }\n        onChange = {\n            (e) => setPassword(e.target.value)\n        }\n        required /\n        >\n        <\n        /div> <\n        button type = \"submit\"\n        className = \"login-button\" >\n        Login <\n        /button> <\n        p className = \"register-prompt\" >\n        Donâ€™ t have an account ? { ' ' } <\n        button type = \"button\"\n        onClick = { handleRegisterClick } >\n        Register <\n        /button> < /\n        p > <\n        /form> < /\n        div >\n    );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}